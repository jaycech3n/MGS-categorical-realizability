\usepackage[a4paper,bottom=2cm]{geometry}
% Fix fancyhdr warnings
\setlength{\headheight}{14.5pt}

\usepackage[english]{babel}

% Only used for text generation in the template
%
\usepackage{lipsum}
%%

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{csquotes}

\usepackage[final]{microtype}

\usepackage[ttscale=.75]{libertine}
\usepackage[libertine]{newtxmath}

% Set nicer (= less bold, less vertical spacing) mathcal font
\usepackage[cal=cm]{mathalpha}

% Set up the opening page for the chapters
\usepackage{titlesec}
\titleformat{\chapter}[display]
{\Huge}
{\filleft\textsc{\chaptertitlename} \thechapter}
{4ex}
{\bfseries
  \titlerule%
  \vspace{2ex}%
\filright}
[\vspace{2ex}%
\titlerule]

% Set up the headers and footers
\usepackage{fancyhdr}
\usepackage{ifthen}
\pagestyle{fancy}
\fancyhf{}
% Use ifthenelse to work around the fact that we wish to have alternate headers
% but a onesided document
% (https://tex.stackexchange.com/questions/69100/distinguish-even-odd-pages-in-header-with-oneside-option)
\fancyhead[R]{\ifthenelse{\isodd{\value{page}}}{\thepage\hfill\textsc{\nouppercase\leftmark}}{}}
\fancyhead[L]{\ifthenelse{\isodd{\value{page}}}{}{\textsc{\nouppercase\rightmark}\hfill\thepage}}
\fancyfoot[C]{\tiny{If you find an inaccuracy of any kind, please go to \url{https://github.com/tomdjong/MGS-categorical-realizability\#fixing-inaccuracies}.}}

% Remove page numbers on the first page of a chapter
% https://tex.stackexchange.com/questions/278420/remove-page-number-on-chapter-page
\fancypagestyle{plain}{%
  \renewcommand{\headrulewidth}{0pt}%
  \fancyhf{}%
  \fancyfoot[C]{\tiny{If you find an inaccuracy of any kind, please go to
      \url{https://github.com/tomdjong/MGS-categorical-realizability\#fixing-inaccuracies}.}}
}

% \renewcommand{\footruleskip}{5mm}
\setlength{\skip\footins}{5mm}

% Force footnotes at the bottom of the page
\usepackage[bottom]{footmisc}

% See the excellent biblatex documentation for more information
\usepackage[
backend=biber,%
style=alphabetic,%
block=ragged,%
backref=true,%
useprefix=true,%
maxnames=8,%
minnames=7,%
minalphanames=3,%
maxalphanames=4,%
backrefstyle=two]%
{biblatex}
\renewcommand{\subtitlepunct}{\addcolon\addspace}

% Enumerations and tables
\usepackage{calc}
\usepackage[shortlabels]{enumitem}
% \setlist{nosep}
\setlist{itemsep=0mm}
\setlist[description]{font={\textnormal},labelindent=\parindent}

\usepackage{booktabs}
\usepackage{longtable}
\usepackage[width=.8\textwidth]{caption}
\captionsetup[table]{skip=1em}

% Math packages
\usepackage{mathtools}

\usepackage{savesym}
\usepackage{amsmath}
\savesymbol{openbox}
\usepackage{amsthm}

\usepackage{thmtools}
\usepackage{thm-restate}
\savesymbol{Bbbk}
\usepackage{amssymb}
\usepackage{stmaryrd}

\usepackage{bussproofs}

% For keeping track of the total number of exercises
\usepackage{totcount}

% tocbibind allows us to have the toc in the toc
\usepackage[notbib,notindex]{tocbibind}

% Used in hyperref's setup, and must be loaded before tikz-cd.
\usepackage[dvipsnames]{xcolor}
\usepackage[most]{tcolorbox}

\usepackage{tikz-cd}

%% TikZ arrows
\usetikzlibrary{decorations.markings,decorations.pathreplacing,
  shapes.geometric,matrix,arrows,chains,positioning,scopes}

\pgfdeclarearrow{
  name = pxto,
  setup code = {
    % The different end values:
    \pgfarrowssettipend{1.5\pgflinewidth}
    \pgfarrowssetbackend{-2.5508\pgflinewidth}
    \pgfarrowssetlineend{-.25\pgflinewidth}
    \pgfarrowssetvisualbackend{-0.021\pgflinewidth}
    % The hull
    \pgfarrowsupperhullpoint{1.5\pgflinewidth}{0\pgflinewidth}
    \pgfarrowsupperhullpoint{-2.0085\pgflinewidth}{3.6525\pgflinewidth}
    \pgfarrowsupperhullpoint{-2.5508\pgflinewidth}{3.0763\pgflinewidth}
    % No saves
  },
  drawing code = {
    \pgfsetdash{}{0pt}%
    \pgfpathmoveto{\pgfpoint{1.5\pgflinewidth}{0.0254\pgflinewidth}}%
    \pgfpathlineto{\pgfpoint{-2.0085\pgflinewidth}{3.6525\pgflinewidth}}%
    \pgfpathlineto{\pgfpoint{-2.5508\pgflinewidth}{3.0763\pgflinewidth}}%
    \pgfpathlineto{\pgfpoint{-0.4322\pgflinewidth}{0.5\pgflinewidth}}%
    \pgfpathlineto{\pgfpoint{-0.4322\pgflinewidth}{-0.5\pgflinewidth}}%
    \pgfpathlineto{\pgfpoint{-2.5508\pgflinewidth}{-3.0763\pgflinewidth}}%
    \pgfpathlineto{\pgfpoint{-2.0085\pgflinewidth}{-3.6525\pgflinewidth}}%
    \pgfpathclose%
    \pgfusepathqfill
  }
}
\tikzset{>=pxto}
\tikzcdset{arrow style=tikz}
% \tikzcdset{
% arrow style=math font}

% Penrose triangle icon setup + command
\newcommand\iconscale{1}
\NewDocumentCommand{\makeicon}{O{1}}{\renewcommand\iconscale{#1}\input{icon}}